(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n.p+"static/media/LogoTest.259e22ce.png"},34:function(e,t,n){e.exports=n.p+"static/media/headerLogo.6899dee4.jpg"},35:function(e,t,n){e.exports=n(50)},40:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),c=n.n(i),s=n(23),o=(n(40),n(8)),l=n(14),u=n(31),d=n(32),p=n(13);function m(e){return{type:"DELETE_EXPENSE",wallet:{expenses:e}}}function h(e,t){return{type:"EDIT_EXPENSE",wallet:{buttonText:e,idToEdit:t}}}var b={email:""};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.user;switch(n){case"LOGIN":return Object(p.a)(Object(p.a)({},e),{},{email:a.email});default:return e}},f=n(21),v={currencies:[],expenses:[],buttonText:"Adicionar despesa"};var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.wallet;switch(n){case"ADD_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{currencies:a.currencies,expenses:[].concat(Object(f.a)(e.expenses),[a.expenses])});case"DELETE_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{currencies:a.currencies,expenses:a.expenses});case"EDIT_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{buttonText:a.buttonText,idToEdit:a.idToEdit});default:return e}},g=Object(l.combineReducers)({user:E,wallet:x}),O=Object(l.createStore)(g,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(d.a))),j=n(2),y=n(15),C=n(3),w=n(4),k=n(7),S=n(6),T=n(5),N=(n(45),n(33)),D=n.n(N),R=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={email:"",password:"",disabled:!0},a.handleChange=a.handleChange.bind(Object(k.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(k.a)(a)),a.validForm=a.validForm.bind(Object(k.a)(a)),a.sendLogin=a.sendLogin.bind(Object(k.a)(a)),a}return Object(w.a)(n,[{key:"validForm",value:function(){var e=this.state,t=e.password,n=e.email;[t.length<6,!n.includes("@"),n.split("@").length>2,!n.includes(".com")].every((function(e){return!1===e}))?this.setState({disabled:!1}):this.setState({disabled:!0})}},{key:"sendLogin",value:function(){var e=this.state.email,t=this.props,n=t.history,a=t.UserLoginAction;localStorage.setItem("email",e),a(e),n.push("/digital-wallet/carteira")}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(y.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.disabled;return r.a.createElement("div",{className:"login-screen"},r.a.createElement("img",{src:D.a,alt:"Login logo",className:"login-logo"}),r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{"data-testid":"email-input",className:"login-input",type:"email",name:"email",value:t,onChange:this.handleChange,onKeyUp:this.validForm,placeholder:"Email"}),r.a.createElement("input",{"data-testid":"password-input",className:"login-input",type:"password",name:"password",value:n,onChange:this.handleChange,onKeyUp:this.validForm,placeholder:"Password"}),r.a.createElement("button",{type:"submit",className:"login-button",disabled:a,onClick:this.sendLogin},"Entrar"))))}}]),n}(a.Component),L=Object(o.b)(null,(function(e){return{UserLoginAction:function(t){return e(function(e){return{type:"LOGIN",user:{email:e}}}(t))}}}))(R),A=(n(46),n(34)),I=n.n(A),U=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.handleExpenses,a=e.email;return r.a.createElement("header",{className:"header-container"},r.a.createElement("span",{id:"user"},t),r.a.createElement("img",{src:I.a,alt:"header Logo"}),r.a.createElement("span",{id:"user-email","data-testid":"email-field"},"Email: ".concat(a)),r.a.createElement("div",{className:"expenses-container"},r.a.createElement("span",{"data-testid":"total-field",id:"total-field"},"Despesa Total: R$ ".concat(n())),r.a.createElement("span",{"data-testid":"header-currency-field",id:"currency"}," BRL")))}}]),n}(a.Component),P=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}))(U),F=(n(47),{USD:"D\xf3lar Comercial",CAD:"D\xf3lar Canadense",EUR:"Euro",GBP:"Libra Esterlina",ARS:"Peso",BTC:"Bitcoin",LTC:"Litecoin",JPY:"Yen",CHF:"Swiss",AUD:"D\xf3lar Australiano",CNY:"Yuan",ILS:"Israeli New Shekew",ETH:"Ethereum",XRP:"Riple"}),_=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){var e;return Object(C.a)(this,n),(e=t.call(this)).deleteExpense=e.deleteExpense.bind(Object(k.a)(e)),e.editExpense=e.editExpense.bind(Object(k.a)(e)),e}return Object(w.a)(n,[{key:"deleteExpense",value:function(){var e=this.props.expense.id,t=this.props,n=t.deleteExpenses,a=t.editExpenses,r=t.expenses.filter((function(t){return t.id!==e}));r.length<1&&a("Adicionar despesa"),n(r)}},{key:"editExpense",value:function(){var e=this.props;(0,e.editExpenses)("Editar despesa",e.expense.id)}},{key:"render",value:function(){var e=this.props.expense,t=e.exchangeRates,n=e.currency,a=e.description,i=e.tag,c=e.method,s=e.value,o=Object.values(t),l=o.filter((function(e){return e.code===n})),u=Number(s)*l[0].ask,d=parseInt(100*u,10)/100,p=o.filter((function(e){return e.code===n}))[0].ask;return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,i),r.a.createElement("td",null,c),r.a.createElement("td",null,"".concat(parseInt(s,10))),r.a.createElement("td",null,F[n]),r.a.createElement("td",null,parseFloat(p).toFixed(2)),r.a.createElement("td",null,d),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"delete-btn",className:"delete-button",onClick:this.deleteExpense},"Delete"),r.a.createElement("button",{type:"button","data-testid":"edit-btn",className:"delete-button",onClick:this.editExpense},"Editar")))}}]),n}(a.Component),X=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpenses:function(t){return e(m(t))},editExpenses:function(t,n){return e(h(t,n))}}}))(_),B=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){return r.a.createElement("tr",null,["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Excluir"].map((function(e){return r.a.createElement("th",{key:e},e)})))}}]),n}(a.Component),q=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props.expenses;return r.a.createElement("table",{className:"expenses-table"},r.a.createElement(B,null),e.map((function(e){return r.a.createElement(X,{expense:e,key:e.id})})))}}]),n}(a.Component),M=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}))(q),Y=n(18),G=n.n(Y),J=n(25),W=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.addExpense,n=e.buttonText;return r.a.createElement("button",{className:"add-button",type:"submit",onClick:t},n)}}]),n}(a.Component),z=Object(o.b)((function(e){return{buttonText:e.wallet.buttonText}}))(W),H=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.type,a=e.info,i=e.onChange;return r.a.createElement("label",{htmlFor:t},"".concat(t[0].toUpperCase()).concat(t.substring(1,t.length)),r.a.createElement("input",{type:n,name:t,id:t,onChange:i,value:a}))}}]),n}(a.Component),K=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.onChange,a=e.info,i=e.data,c="currency"===t?"coin":t;return r.a.createElement("label",{htmlFor:t,className:"expenses-select"},"".concat(t[0].toUpperCase()).concat(t.substring(1,t.length)),r.a.createElement("select",{name:t,id:c,onChange:n,value:a},"currency"===t?i.map((function(e){var t=e.code;return r.a.createElement("option",{key:t},t)})):i.map((function(e){return r.a.createElement("option",{key:e},e)}))))}}]),n}(a.Component),V=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){var e;return Object(C.a)(this,n),(e=t.call(this)).state={id:0,value:0,description:"none",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",exchangeRates:{}},e.exchangeRatesRequisition=e.exchangeRatesRequisition.bind(Object(k.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(k.a)(e)),e.handleChange=e.handleChange.bind(Object(k.a)(e)),e.addOrEditExpenses=e.addOrEditExpenses.bind(Object(k.a)(e)),e}return Object(w.a)(n,[{key:"componentDidMount",value:function(){this.exchangeRatesRequisition()}},{key:"exchangeRatesRequisition",value:function(){var e=Object(J.a)(G.a.mark((function e(){var t,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:delete(n=e.sent).USDT,this.setState({exchangeRates:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(y.a)({},n,a))}},{key:"addOrEditExpenses",value:function(){var e=Object(J.a)(G.a.mark((function e(){var t,n,a,r,i,c,s,o,l,u,d,p,m,h,b,E,v,x,g;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exchangeRatesRequisition();case 2:t=this.props,n=t.walletAction,a=t.buttonText,r=t.idToEdit,i=t.expenses,c=t.deleteExpenses,s=t.editExpenses,o=this.state,l=o.value,u=o.currency,d=o.exchangeRates,p=o.id,m=this.state,h=m.description,b=m.method,E=m.tag,"Adicionar despesa"===a?(n({id:p,description:h,method:b,tag:E,value:l,currency:u,exchangeRates:d}),this.setState({id:p+1})):(i.find((function(e){return e.id===r})),v={id:r,description:h,exchangeRates:d,currency:u,method:b,tag:E,value:l},x=i.filter((function(e){return e.id!==r})),(g=[].concat(Object(f.a)(x),[v])).sort((function(e,t){return e.id-t.id})),console.log(x,g),c(g),s("Adicionar despesa"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.value,n=e.description,a=e.currency,i=e.method,c=e.tag,s=e.exchangeRates,o=this.handleChange,l=this.addOrEditExpenses,u=this.handleSubmit,d=Object.values(s);return r.a.createElement("form",{onSubmit:u},r.a.createElement("div",{className:"wallet-container"},r.a.createElement(H,{name:"value",type:"number",info:t,onChange:o}),r.a.createElement(H,{name:"description",type:"text",info:n,onChange:o}),r.a.createElement(K,{name:"currency",onChange:o,info:a,data:d}),r.a.createElement(K,{name:"method",onChange:o,info:i,data:["Dinheiro","Cart\xe3o de Cr\xe9dito","Cart\xe3o de D\xe9bito"]}),r.a.createElement(K,{name:"tag",onChange:o,info:c,data:["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"]}),r.a.createElement(z,{addExpense:l})))}}]),n}(a.Component),$=Object(o.b)((function(e){return{buttonText:e.wallet.buttonText,idToEdit:e.wallet.idToEdit,expenses:e.wallet.expenses}}),(function(e){return{walletAction:function(t){return e(function(e){return{type:"ADD_EXPENSE",wallet:{expenses:e}}}(t))},deleteExpenses:function(t){return e(m(t))},editExpenses:function(t){return e(h(t))}}}))(V),Q=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).createLogin=a.createLogin.bind(Object(k.a)(a)),a.handleChange=a.handleChange.bind(Object(k.a)(a)),a.handleExpenses=a.handleExpenses.bind(Object(k.a)(a)),a}return Object(w.a)(n,[{key:"createLogin",value:function(){var e=this.props.email,t=e.indexOf("@");return"_".concat(e[0].toUpperCase()).concat(e.substr(1,t-1),"_")}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(y.a)({},n,a))}},{key:"handleExpenses",value:function(){var e=this.props.expenses,t=e.map((function(e){var t=e.exchangeRates,n=e.currency,a=e.value,r=Object.values(t).filter((function(e){return e.code===n})),i=Number(a)*r[0].ask;return parseInt(100*i,10)/100}));return e.length?parseInt(100*t.reduce((function(e,t){return e+t})),10)/100:0}},{key:"render",value:function(){this.handleExpenses();var e,t=localStorage.getItem("email"),n=t.indexOf("@");return t&&(e="_".concat(t[0].toUpperCase()).concat(t.substr(1,n-1),"_")),r.a.createElement("div",{className:"wallet-style"},r.a.createElement(P,{user:e,email:t,handleExpenses:this.handleExpenses}),r.a.createElement($,null),r.a.createElement(M,null))}}]),n}(r.a.Component),Z=Object(o.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(Q);var ee=function(){return r.a.createElement(j.c,null,r.a.createElement(j.a,{exact:!0,path:"/digital-wallet",component:L}),r.a.createElement(j.a,{exact:!0,path:"/digital-wallet/carteira",component:Z}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,{store:O},r.a.createElement(s.a,null,r.a.createElement(ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.246baf45.chunk.js.map